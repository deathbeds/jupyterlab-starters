name: jupyterlab-starters

commands:
  lab:
    unix: jupyter lab --no-browser --debug
  lint:
    unix: python scripts/lint.py && jlpm lint
  integrity:
    unix: python scripts/integrity.py
  atest:
    unix: python scripts/atest.py --dryrun && python scripts/atest.py
  utest:
    unix: python scripts/utest.py
  release:
    unix: python scripts/release.py
  upload:
    unix: python scripts/upload.py
  docs:
    unix: python scripts/docs.py
    env_spec: docs
  docs:watch:
    unix: git clean -dxf docs/_build && sphinx-autobuild docs docs/_build
    env_spec: docs

env_specs:
  default:
    inherit_from:
      - jupyterlab-starters
    packages:
      - black
      - firefox
      - flake8
      - geckodriver
      - isort
      - mypy
      - pylint
      - pytest
      - pytest-asyncio
      - pytest-cov
      - pytest-flake8
      - robotframework-lint
      - robotframework-seleniumlibrary
      - ruamel_yaml
      - twine >=1.11.0
      - wheel >=0.31.0

  docs:
    inherit_from:
      - default
    packages:
      - nbsphinx
      - pip
      - pytest
      - recommonmark
      - sphinx
      - sphinx_rtd_theme
      - sphinx-autobuild
      - sphinx-autodoc-typehints
      - sphinx-copybutton
      - pip:
          - pytest-check-links
          - sphinx-markdown-tables

  jupyterlab-starters:
    channels:
      - conda-forge
      - defaults
    packages:
      - cookiecutter
      - importlib_metadata
      - jupyterlab >=1.2.4,<1.3
      - nodejs >=11,<12
      - python >=3.7,<3.8.0a0
      - python-fastjsonschema
      - python-graphviz
      - ujson
